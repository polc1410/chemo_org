[
  {
    "path": "posts/2021-03-14-building-the-vaccine-allergy-flow-chart/",
    "title": "Building the vaccine allergy flow chart",
    "description": "A brief blog describing how we built the flow chart for the UK Chemotherapy Board Guidance for patients with a history of allergic response who are having the coronavirus vaccine.",
    "author": [
      {
        "name": "Calum Polwart",
        "url": {}
      }
    ],
    "date": "2021-03-14",
    "categories": [],
    "contents": "\r\nBackground\r\nI’ve recently been doing some work with some colleagues for the UK Chemotherapy Board to create guidance for the administration of the COVID-19 vaccine to patients undergoing Systemic Anti-cancer Therapy. For version 3 of the guidance we needed to add a flow diagram to explain the choices of vaccine to be used for patients with a history of allergy and highlight the most common agents including potential cross reacting agents.\r\nDrawing flowhcarts is easy. If everyone who is going to edit it has the same software, and sometimes the same version. Otherwise shared edits can get very messy. As I spend a lot of time in text based files like mark-down it seemed only sensible to build the diagram in a text based system. Plant UML is just such a system. This post describes how that diagram was built.\r\nYou can edit a UML file at . It turns out github will also render a UML file written in plantUML with the file extension .puml with reasonable reliability (see the note later on).\r\nThe Basic Diagram\r\nThe very first step is to define a diagram. (If like in this blog post you happen to want to render uml in R Markdown - you need to install the plantuml package in R.)\r\nUML Diagrams in Markdown\r\nIf you are working within Markdown - you need to follow these steps, otherwise simply move to the next section and copy the code blocks to planttext.com or save them as .puml files in github.\r\n# If you are working in R you would run these commands to\r\n# install and load plantuml. (Once the first 2 are run you only need to run the last each time)\r\n\r\ninstall.packages(\"devtools\")\r\ndevtools::install_github(\"rkrug/plantuml\")\r\nrequire(plantuml)\r\nplantuml_knit_engine_register()\r\n\r\n# You can now insert a code chunk in r which uses `\\`\\`{plantuml} as the starting line\r\nA basic diagram, with two choices and an action:\r\nDiagrams start and end with @start and @endmul.\r\nTo begin a diagram with a black circle use start.\r\nTo place a decision in the diagram us if … then … else … endif\r\n\r\n@startuml\r\n  start\r\n  if (a decision) then (yes)\r\n    : Do something]\r\n  else (no)\r\n    : Do something else]\r\n  endif\r\n@endmul\r\n\r\n\r\nWe start by replacing the basic if then else model with our opening questions and actions:\r\n\r\n@startuml\r\nstart\r\n  if (Systemic hypersensitivity reaction to SACT?) then (Yes)\r\n    : We will need to decide what to do]\r\n  else (No)\r\n    : Offer either AstraZeneca or Pfizer Vaccine]\r\n  endif\r\n@enduml\r\n\r\n\r\nWe don’t actually want to end back at a single end-point, so we should detach from the diagram when we have finished the action (e.g. given a vaccine)\r\n\r\n@startuml\r\nstart\r\n  if (Systemic hypersensitivity reaction to SACT?) then (Yes)\r\n    : We will need to decide what to do]\r\n    detach\r\n  else (No)\r\n    : Offer either AstraZeneca or Pfizer Vaccine]\r\n    detach\r\n  endif\r\n@enduml\r\n\r\n\r\nThis diagram isn’t quite right though, as we need to remember someone could have reacted to other medicines than SACT.\r\n\r\n@startuml\r\nstart\r\n  if (Systemic hypersensitivity reaction to SACT?) then (Yes)\r\n    : We will need to decide what to do]\r\n    detach\r\n  else (No)\r\n    if (Has the patient has an immediate onset-anaphylaxis  to more than one class of medicine (or unexplained anaphylaxis) in the past?) then (Yes)\r\n      :Need to decide what to do]\r\n    else (No)\r\n      : Offer either AstraZeneca or Pfizer Vaccine]\r\n      detach\r\n    endif  \r\n  endif\r\n@enduml\r\n\r\n\r\nWe can now add the next layer of decision. If the reaction was not serious enough to require discontinuation of the treatment, they can still have either vaccine provided they havent had other reactions.\r\n\r\n@startuml\r\nstart\r\n  if (Systemic hypersensitivity reaction to SACT?) then (Yes)\r\n    if (Did reaction result in permanent discontinuation of this treatment?) then (Yes)\r\n        : still need to decide what to do]\r\n        detach\r\n    else (No)\r\n    endif\r\n  endif\r\n  if (Has the patient has an immediate onset-anaphylaxis  to more than one class of medicine (or unexplained anaphylaxis) in the past?) then (Yes)\r\n      :Need to decide what to do]\r\n  else (No)\r\n    : Offer either AstraZeneca or Pfizer Vaccine]\r\n    detach\r\n  endif  \r\n@enduml\r\n\r\n\r\n\r\n@startuml\r\nstart\r\n  if (Systemic hypersensitivity reaction to SACT?) then (Yes)\r\n    if (Did reaction result in permanent discontinuation of this treatment?) then (Yes)\r\n      if (Did this treatment contain polyethylene glycol or a related molecule?) then (Yes)\r\n        :Decide what to do]\r\n        detach\r\n      else (No)\r\n        : May be OK with either. Check the other rules ! ]\r\n      endif\r\n    else (No)\r\n    endif\r\n  endif\r\n  if (Has the patient has an immediate onset-anaphylaxis  to more than one class of medicine (or unexplained anaphylaxis) in the past?) then (Yes)\r\n    :Need to decide what to do]\r\n  else (No)\r\n    : Offer either AstraZeneca or Pfizer Vaccine]\r\n    detach\r\n  endif  \r\n@enduml\r\n\r\n\r\nThings are starting to take shape! We can add a few extra decisions around prior vaccine safety…\r\n\r\n@startuml\r\nstart\r\n  if (Systemic hypersensitivity reaction to SACT?) then (Yes)\r\n    if (Did reaction result in permanent discontinuation of this treatment?) then (Yes)\r\n      if (Did this treatment contain polyethylene glycol or a related molecule?) then (Yes)\r\n        :Decide what to do]\r\n        detach\r\n      else (No)\r\n      endif\r\n    else (No)\r\n    endif\r\n  endif\r\n  if (Has the patient has an immediate onset-anaphylaxis  to more than one class of medicine (or unexplained anaphylaxis) in the past?) then (Yes)\r\n          if (Has the patient had a recent Influenza Vaccine) then (Yes)\r\n            if (Was there any systemic reaction?) then (No)\r\n              :Offer AstraZeneca Vaccine]\r\n              detach\r\n            else (Yes)\r\n              :Refer to allergy specialist]\r\n              detach\r\n            endif\r\n          else (No)\r\n            :Discuss with allergy specialist]\r\n            detach\r\n        endif\r\n  else (No)\r\n    : Offer either AstraZeneca or Pfizer Vaccine]\r\n    detach\r\n  endif  \r\n@enduml\r\n\r\n\r\nAnd now we can go back and answer the remaining question of what to do if you had a prior reaction to something containing PEG\r\n\r\n@startuml\r\nstart\r\n  if (Systemic hypersensitivity reaction to SACT?) then (Yes)\r\n    if (Did reaction result in permanent discontinuation of this treatment?) then (Yes)\r\n      if (Did this treatment contain polyethylene glycol or a related molecule?) then (Yes)\r\n        if (Has the patient had polysorbate-80 (e.g. Docetaxel or Influenza Vaccine without systemic reaction?) then (Yes)\r\n            :Offer AstraZeneca Vaccine]\r\n            detach\r\n        else (No / Unknown)\r\n            :Refer to allergy specialist]\r\n            detach\r\n        endif\r\n      else (No)\r\n      endif\r\n    else (No)\r\n    endif\r\n  endif\r\n  if (Has the patient has an immediate onset-anaphylaxis  to more than one class of medicine (or unexplained anaphylaxis) in the past?) then (Yes)\r\n          if (Has the patient had a recent Influenza Vaccine) then (Yes)\r\n            if (Was there any systemic reaction?) then (No)\r\n              :Offer AstraZeneca Vaccine]\r\n              detach\r\n            else (Yes)\r\n              :Refer to allergy specialist]\r\n              detach\r\n            endif\r\n          else (No)\r\n            :Discuss with allergy specialist]\r\n            detach\r\n        endif\r\n  else (No)\r\n    : Offer either AstraZeneca or Pfizer Vaccine]\r\n    detach\r\n  endif  \r\n@enduml\r\n\r\n\r\nThe basic structure of the diagram is now complete. Lets add some cosmetic bits. skinparam will allow us to set a few settings - wrapWidth sets the maximum width of the text boxes, padding says how close boxes can get to each other and ConditionEndStyle hline will remove the diamonds when lines rejoin (saving sapce).\r\n\r\n@startuml\r\nskinparam wrapWidth 150\r\nskinparam Padding 8\r\nskinparam ConditionEndStyle hline\r\n\r\nstart\r\n  if (Systemic hypersensitivity reaction to SACT?) then (Yes)\r\n    if (Did reaction result in permanent discontinuation of this treatment?) then (Yes)\r\n      if (Did this treatment contain polyethylene glycol or a related molecule?) then (Yes)\r\n        if (Has the patient had polysorbate-80 (e.g. Docetaxel or Influenza Vaccine without systemic reaction?) then (Yes)\r\n            :Offer AstraZeneca Vaccine]\r\n            detach\r\n        else (No / Unknown)\r\n            :Refer to allergy specialist]\r\n            detach\r\n        endif\r\n      else (No)\r\n      endif\r\n    else (No)\r\n    endif\r\n  endif\r\n  if (Has the patient has an immediate onset-anaphylaxis  to more than one class of medicine (or unexplained anaphylaxis) in the past?) then (Yes)\r\n          if (Has the patient had a recent Influenza Vaccine) then (Yes)\r\n            if (Was there any systemic reaction?) then (No)\r\n              :Offer AstraZeneca Vaccine]\r\n              detach\r\n            else (Yes)\r\n              :Refer to allergy specialist]\r\n              detach\r\n            endif\r\n          else (No)\r\n            :Discuss with allergy specialist]\r\n            detach\r\n        endif\r\n  else (No)\r\n    : Offer either AstraZeneca or Pfizer Vaccine]\r\n    detach\r\n  endif  \r\n@enduml\r\n\r\n\r\nThe wrap command doesn’t work for decisions (? bug) so we will need to manually wrap those using \\n as a new line character.\r\n\r\n@startuml\r\nskinparam wrapWidth 150\r\nskinparam Padding 8\r\nskinparam ConditionEndStyle hline\r\n\r\nstart\r\n  if (Systemic hypersensitivity\\nreaction to SACT?) then (Yes)\r\n    if (Did reaction result in permanent\\ndiscontinuation of this treatment?) then (Yes)\r\n      if (Did this treatment contain\\npolyethylene glycol\\nor a related molecule?) then (Yes)\r\n        if (Has the patient had polysorbate-80\\n(e.g. Docetaxel or Influenza Vaccine\\nwithout systemic reaction?) then (Yes)\r\n            :Offer AstraZeneca Vaccine]\r\n            detach\r\n        else (No / Unknown)\r\n            :Refer to allergy specialist]\r\n            detach\r\n        endif\r\n      else (No)\r\n      endif\r\n    else (No)\r\n    endif\r\n  endif\r\n  if (Has the patient has an immediate onset-anaphylaxis\\n to more than one class of medicine\\n(or unexplained anaphylaxis) in the past?) then (Yes)\r\n          if (Has the patient had\\na recent Influenza Vaccine) then (Yes)\r\n            if (Was there any systemic reaction?) then (No)\r\n              :Offer AstraZeneca Vaccine]\r\n              detach\r\n            else (Yes)\r\n              :Refer to allergy specialist]\r\n              detach\r\n            endif\r\n          else (No)\r\n            :Discuss with allergy specialist]\r\n            detach\r\n        endif\r\n  else (No)\r\n    : Offer either AstraZeneca or Pfizer Vaccine]\r\n    detach\r\n  endif  \r\n@enduml\r\n\r\n\r\nWe now have the basic structure of the flow chart. A note to explain which things have “peg” in them would be helpful.\r\n\r\n@startuml\r\n\r\nnote left \r\n              Notes on Polyethylene glycol\r\n              Polyethylene glycol (PEG) may appear in the medicine name (e.g. pegfilgrastim) or the excipients (see section 6.1 of SmPC).\r\n            \r\n              Polysorbate is related to PEG.\r\n            \r\n              Polyoxyl 35 castor oil is a pegylated oil.\r\n              ....\r\n              Common cancer treatments that contains PEG or PEG relatives:\r\n\r\n              * Cabazitaxel (1)\r\n              * Caelyx (Liposomal Doxorubicin) (2)\r\n              * Docetaxel (1)\r\n              * Lipegfilgrastim (2)\r\n              * Most monoclonal antibodies (drugs ending -mab) (3)\r\n              * Paclitaxel (but not Abraxane) (4)\r\n              * Pegaspargase (2)\r\n              * Pegfilgrastim (2)\r\n\r\n            end note\r\n@enduml\r\n\r\n\r\nWe obviously need to add a key to explain the numerical footnotes. (Actually during development of the diagram we tested a number of footnote methods - but settled on numerical notes as the easiest approach).\r\n\r\n@startuml\r\nlegend   right\r\n    Key:\r\n    1 contains polsorbate-80 \r\n    2 molecule has a polyethylene glycol chain attached \r\n    3 contains polysorbate-20\r\n    4 contains Polyoxyl 35 castor oil\r\nEndLegend\r\n@enduml\r\n\r\n\r\nWe can then add some style, using a mix of CSS style and markup.\r\n\r\n@startuml\r\n\r\nnote left #white\r\n              **__Notes on Polyethylene glycol__**\r\n              Polyethylene glycol (PEG) may appear in the medicine name (e.g. //peg//filgrastim) __or__ the excipients (see section 6.1 of SmPC).\r\n            \r\n              Polysorbate is //related// to PEG.\r\n            \r\n              Polyoxyl 35 castor oil is a pegylated oil.\r\n              ....\r\n              //Common// cancer treatments that contains PEG or PEG relatives:\r\n\r\n              ** Cabazitaxel <color:#ffffff><back:#696969>** 1 **<\/back><\/color>\r\n              ** Caelyx (Liposomal Doxorubicin) <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Docetaxel <color:#ffffff><back:#696969>** 1 **<\/back><\/color>\r\n              ** Lipegfilgrastim <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Most monoclonal antibodies (drugs ending -mab) <back:#696969>** 3 **<\/back><\/color>\r\n              ** Paclitaxel (but not Abraxane) <color:#ffffff><back:#696969>** 4 **<\/back><\/color>\r\n              ** Pegaspargase <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Pegfilgrastim <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n\r\n            end note\r\n              \r\n              legend   right\r\n    **Key:**\r\n    <color:#ffffff><back:#696969>** 1 **<\/back><\/color> contains polsorbate-80 \r\n    <color:#ffffff><back:#696969>** 2 **<\/back><\/color> molecule has a polyethylene glycol chain attached \r\n    <color:#ffffff><back:#696969>** 3 **<\/back><\/color> contains polysorbate-20\r\n    <color:#ffffff><back:#696969>** 4 **<\/back><\/color> contains Polyoxyl 35 castor oil\r\nEndLegend\r\n@enduml\r\n\r\n\r\nWe can then add the note and legend to the original diagram and add some markdown to the diagram.\r\n\r\n@startuml\r\nskinparam wrapWidth 150\r\nskinparam Padding 8\r\nskinparam ConditionEndStyle hline\r\nstart\r\nIf (Systemic hypersensitivity\\n reaction to SACT?) then\r\n    -> Yes;\r\n\r\n    If (Did reaction result in permanent\\ndiscontinuation of this treatment?) then\r\n        -> Yes;\r\n\r\n        If (Did this treatment contain\\n **polyethylene glycol** \\nor a //related// molecule?) then\r\n            -> Yes;\r\n            note left\r\n              **__Notes on Polyethylene glycol__**\r\n              Polyethylene glycol (PEG) may appear in the medicine name (e.g. //peg//filgrastim) __or__ the excipients (see section 6.1 of SmPC).\r\n\r\n              Polysorbate is //related// to PEG.\r\n\r\n              Polyoxyl 35 castor oil is a pegylated oil.\r\n              ....\r\n              //Common// cancer treatments that contains PEG or PEG relatives:\r\n\r\n              ** Cabazitaxel <color:#ffffff><back:#696969>** 1 **<\/back><\/color>\r\n              ** Caelyx (Liposomal Doxorubicin) <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Docetaxel <color:#ffffff><back:#696969>** 1 **<\/back><\/color>\r\n              ** Lipegfilgrastim <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Most monoclonal antibodies (drugs ending -mab) <color:#ffffff><back:#696969>** 3 **<\/back><\/color>\r\n              ** Paclitaxel (but not Abraxane) <color:#ffffff><back:#696969>** 4 **<\/back><\/color>\r\n              ** Pegaspargase <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Pegfilgrastim <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n\r\n            end note\r\n\r\n        If (Has the patient had \\npolysorbate-80 (e.g. Docetaxel<color:#ffffff><back:#696969>** 1 **<\/back><\/color>\\nor Influenza Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>)\\nwithout **systemic** reaction?) then\r\n            -> Yes;   \r\n            #LawnGreen:Offer AstraZeneca Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>]\r\n            detach\r\n\r\n        Else (No / Unknown)\r\n            #Red:Refer to allergy specialist]\r\n            detach\r\n        EndIf\r\n\r\n    Else (No)\r\n\r\n    EndIf\r\n\r\n    Else(No)\r\n\r\n    EndIf\r\n\r\nElse(No)\r\n\r\nEndIf\r\n    If (Has the patient has an immediate onset-anaphylaxis\\n to more than one class of medicine\\n (or unexplained anaphylaxis) in the past?) then\r\n        -> Yes;\r\n\r\n        If (Has the patient had\\n a recent Influenza Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>?) then\r\n            -> Yes;  \r\n\r\n            If (Was there any **systemic** reaction?) then\r\n                -> No;  \r\n\r\n                #LawnGreen:Offer AstraZeneca Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>]\r\n                detach\r\n\r\n            Else (Yes)\r\n                #Red:Refer to allergy specialist]\r\n                detach\r\n\r\n            EndIf\r\n\r\n        Else (No)\r\n\r\n            #Orange:Discuss with allergy specialist]\r\n            detach\r\n\r\n        EndIf\r\n\r\n    Else (No)\r\n\r\n            #LawnGreen:Offer either AstraZeneca or Pfizer Vaccine]\r\n            detach\r\n    EndIf\r\n\r\nlegend   right\r\n    **Key:**\r\n    <color:#ffffff><back:#696969>** 1 **<\/back><\/color> contains polsorbate-80 \r\n    <color:#ffffff><back:#696969>** 2 **<\/back><\/color> molecule has a polyethylene glycol chain attached \r\n    <color:#ffffff><back:#696969>** 3 **<\/back><\/color> contains polysorbate-20\r\n    <color:#ffffff><back:#696969>** 4 **<\/back><\/color> contains Polyoxyl 35 castor oil\r\nEndLegend\r\n@enduml\r\n\r\n\r\nFinally, we have an almost complete diagram. It needs a title, and a copyright footer so that people can legitimately reproduce it in a local SOP etc. And we will add a few extra style features\r\n\r\n@startuml\r\nskinparam wrapWidth 150\r\nskinparam NoteFontSize 10\r\nskinparam LegendFontSize 10\r\nskinparam Padding 8\r\nskinparam ConditionEndStyle hline\r\n\r\nTitle Decision aid for selection of coronavirus vaccine in patients with\\na  history of allergic reaction to Systemic Anti-Cancer Therapies (SACT)\\n\r\n\r\nstart\r\nIf (Systemic hypersensitivity\\n reaction to SACT?) then\r\n    -> Yes;\r\n\r\n    If (Did reaction result in permanent\\ndiscontinuation of this treatment?) then\r\n        -> Yes;\r\n\r\n        If (Did this treatment contain\\n **polyethylene glycol** \\nor a //related// molecule?) then\r\n            -> Yes;\r\n            note left\r\n              **__Notes on Polyethylene glycol__**\r\n              Polyethylene glycol (PEG) may appear in the medicine name (e.g. //peg//filgrastim) __or__ the excipients (see section 6.1 of SmPC).\r\n\r\n              Polysorbate is //related// to PEG.\r\n\r\n              Polyoxyl 35 castor oil is a pegylated oil.\r\n              ....\r\n              //Common// cancer treatments that contains PEG or PEG relatives:\r\n\r\n              ** Cabazitaxel <color:#ffffff><back:#696969>** 1 **<\/back><\/color>\r\n              ** Caelyx (Liposomal Doxorubicin) <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Docetaxel <color:#ffffff><back:#696969>** 1 **<\/back><\/color>\r\n              ** Lipegfilgrastim <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Most monoclonal antibodies (drugs ending -mab) <color:#ffffff><back:#696969>** 3 **<\/back><\/color>\r\n              ** Paclitaxel (but not Abraxane) <color:#ffffff><back:#696969>** 4 **<\/back><\/color>\r\n              ** Pegaspargase <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Pegfilgrastim <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n\r\n            end note\r\n\r\n        If (Has the patient had \\npolysorbate-80 (e.g. Docetaxel<color:#ffffff><back:#696969>** 1 **<\/back><\/color>\\nor Influenza Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>)\\nwithout **systemic** reaction?) then\r\n            -> Yes;   \r\n            #LawnGreen:Offer AstraZeneca Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>]\r\n            detach\r\n\r\n        Else (No / Unknown)\r\n            #Red:Refer to allergy specialist]\r\n            detach\r\n        EndIf\r\n\r\n    Else (No)\r\n\r\n    EndIf\r\n\r\n    Else(No)\r\n\r\n    EndIf\r\n\r\nElse(No)\r\n\r\nEndIf\r\n    If (Has the patient has an immediate onset-anaphylaxis\\n to more than one class of medicine\\n (or unexplained anaphylaxis) in the past?) then\r\n        -> Yes;\r\n\r\n        If (Has the patient had\\n a recent Influenza Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>?) then\r\n            -> Yes;  \r\n\r\n            If (Was there any **systemic** reaction?) then\r\n                -> No;  \r\n\r\n                #LawnGreen:Offer AstraZeneca Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>]\r\n                detach\r\n\r\n            Else (Yes)\r\n                #Red:Refer to allergy specialist]\r\n                detach\r\n\r\n            EndIf\r\n\r\n        Else (No)\r\n\r\n            #Orange:Discuss with allergy specialist]\r\n            detach\r\n\r\n        EndIf\r\n\r\n    Else (No)\r\n\r\n            #LawnGreen:Offer either AstraZeneca or Pfizer Vaccine]\r\n            detach\r\n    EndIf\r\n\r\nlegend   right\r\n    **Key:**\r\n    <color:#ffffff><back:#696969>** 1 **<\/back><\/color> contains polsorbate-80 \r\n    <color:#ffffff><back:#696969>** 2 **<\/back><\/color> molecule has a polyethylene glycol chain attached \r\n    <color:#ffffff><back:#696969>** 3 **<\/back><\/color> contains polysorbate-20\r\n    <color:#ffffff><back:#696969>** 4 **<\/back><\/color> contains Polyoxyl 35 castor oil\r\nEndLegend\r\n@enduml\r\n\r\n\r\nThis is the figure we published in version 3 of the guidelines. Since then we have had some useful feedback and so there is a slighlty updated version. Firstly Bruce Burnett reminded us to be more colourblind friendly. On Bruce’s advice, we have removed the coloured boxes and replaced them with coloured boundaries on the boxes. And based on user feedback, we have clarified that mono-clonal antibodies could contain polysorbate 20 or 80.\r\n\r\n@startuml\r\n<style>\r\nnote {\r\n  LineColor black\r\n  FontSize 10\r\n  }\r\nactivity {\r\n  LineColor black\r\n  .red {\r\n    LineColor red\r\n    LineThickness 5\r\n  }\r\n    .orange {\r\n    LineColor orange\r\n    LineThickness 5\r\n  }\r\n    .green {\r\n    LineColor lawngreen\r\n    LineThickness 5\r\n    }\r\n}\r\nlegend {\r\n  FontSize 10\r\n}\r\n<\/style>\r\nskinparam wrapWidth 150\r\nskinparam Padding 8\r\nskinparam ConditionEndStyle hline\r\n' skinparam monochrome true\r\nskinparam ArrowColor black\r\n\r\n\r\nTitle Decision aid for selection of coronavirus vaccine in patients with\\na  history of allergic reaction to Systemic Anti-Cancer Therapies (SACT)\\n\r\nstart\r\nIf (Systemic hypersensitivity\\n reaction to SACT?) then\r\n    -> Yes;\r\n\r\n    If (Did reaction result in permanent\\ndiscontinuation of this treatment?) then\r\n        -> Yes;\r\n\r\n        If (Did this treatment contain\\n **polyethylene glycol** \\nor a //related// molecule?) then\r\n            -> Yes;\r\n            note left #white\r\n              **__Notes on Polyethylene glycol__**\r\n              Polyethylene glycol (PEG) may appear in the medicine name (e.g. //peg//filgrastim) __or__ the excipients (see section 6.1 of SmPC).\r\n            \r\n              Polysorbate is //related// to PEG.\r\n            \r\n              Polyoxyl 35 castor oil is a pegylated oil.\r\n              ....\r\n              //Common// cancer treatments that contains PEG or PEG relatives:\r\n\r\n              ** Cabazitaxel <color:#ffffff><back:#696969>** 1 **<\/back><\/color>\r\n              ** Caelyx (Liposomal Doxorubicin) <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Docetaxel <color:#ffffff><back:#696969>** 1 **<\/back><\/color>\r\n              ** Lipegfilgrastim <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Most monoclonal antibodies (drugs ending -mab) <color:#ffffff><back:#696969>** 1 **<\/back><\/color><color:#ffffff>, <back:#696969>** 3 **<\/back><\/color>\r\n              ** Paclitaxel (but not Abraxane) <color:#ffffff><back:#696969>** 4 **<\/back><\/color>\r\n              ** Pegaspargase <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n              ** Pegfilgrastim <color:#ffffff><back:#696969>** 2 **<\/back><\/color>\r\n\r\n            end note\r\n\r\n        If (Has the patient had \\npolysorbate-80 (e.g. Docetaxel<color:#ffffff><back:#696969>** 1 **<\/back><\/color>\\nor Influenza Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>)\\nwithout **systemic** reaction?) then\r\n            -> Yes;   \r\n            <<green>>:Offer AstraZeneca Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>]\r\n            detach\r\n\r\n        Else (No / Unknown)\r\n            <<Red>>:Refer to allergy specialist]\r\n            detach\r\n        EndIf\r\n\r\n    Else (No)\r\n\r\n    EndIf\r\n\r\n    Else(No)\r\n\r\n    EndIf\r\n    \r\nElse(No)\r\n\r\nEndIf\r\n    If (Has the patient has an immediate onset-anaphylaxis\\n to more than one class of medicine\\n (or unexplained anaphylaxis) in the past?) then\r\n        -> Yes;\r\n    \r\n        If (Has the patient had\\n a recent Influenza Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>?) then\r\n            -> Yes;  \r\n\r\n            If (Was there any **systemic** reaction?) then\r\n                -> No;  \r\n                \r\n                <<green>>:Offer AstraZeneca Vaccine<color:#ffffff><back:#696969>** 1 **<\/back><\/color>]\r\n                detach\r\n                \r\n            Else (Yes)\r\n                <<Red>>:Refer to allergy specialist]\r\n                detach\r\n                \r\n            EndIf\r\n        \r\n        Else (No)\r\n    \r\n            <<Orange>>:Discuss with allergy specialist]\r\n            detach\r\n            \r\n        EndIf\r\n\r\n    Else (No)\r\n\r\n            <<green>>:Offer either AstraZeneca or Pfizer Vaccine]\r\n            detach\r\n    EndIf\r\n\r\nlegend   right\r\n    **Key:**\r\n    <color:#ffffff><back:#696969>** 1 **<\/back><\/color> contains polsorbate-80 \r\n    <color:#ffffff><back:#696969>** 2 **<\/back><\/color> molecule has a polyethylene glycol chain attached \r\n    <color:#ffffff><back:#696969>** 3 **<\/back><\/color> contains polysorbate-20\r\n    <color:#ffffff><back:#696969>** 4 **<\/back><\/color> contains Polyoxyl 35 castor oil\r\nEndLegend\r\nfooter \r\n    This work is licensed under CC BY-SA 4.0. To view a copy of this license, visit http://creativecommons.org/licenses/by-sa/4.0/.\r\n    Please ensure you are using the most up to date version by accessing ukchemotherapyboard.org\r\nEndFooter\r\n@enduml\r\n\r\n\r\n\r\n$(document).ready(function () {\r\n    $('.lightbox').each(function () {\r\n        $(this).click(function (e) {\r\n            var classes = $(this).attr('class').split(/\\s+/);\r\n            if(classes.includes('open'))\r\n            {\r\n                $(this).removeClass('open');\r\n            }\r\n            else\r\n            {\r\n                $(this).addClass('open');\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-03-14-building-the-vaccine-allergy-flow-chart/unnamed-chunk-1.png",
    "last_modified": "2022-05-13T11:48:12+01:00",
    "input_file": {},
    "preview_width": 270,
    "preview_height": 160
  },
  {
    "path": "posts/2021-03-14-are-the-vaccines-working/",
    "title": "Are the vaccines working?",
    "description": "With much attention on the COVID-19 vaccines, I wanted to find a quick and easy way to use publically available data to see if they were working...",
    "author": [
      {
        "name": "Calum Polwart",
        "url": {}
      }
    ],
    "date": "2021-02-12",
    "categories": [],
    "contents": "\r\nWhy\r\nThere is a lot of vaccine scepticism, which means even if government published vaccine effects are shared, there will be a cohort of people who will still have doubts. If we could use publicly available data that would be hard for a government to have doctored to generate some visualisation we might be able to see if the vaccine is working.\r\nHow\r\nData Sources\r\nWe can obtain the rates of new infection by age from the UK Government website.\r\n\r\n\r\n#\r\n\r\n\r\n\r\nComparator\r\nThe early vaccine campaign in the UK concentrated on patients over 80 years of age, and front-line healthcare staff. Therefore we should be able to compare the over 80 population to the rest of the population. As the roll-out matures, we will need to add Over 70’s and then younger groups.\r\n\r\n\r\n#\r\n\r\n\r\n\r\nOutcome\r\nDefining what outcome we are looking for with the vaccine campaign is an interesting debate which could be the subject of a very long blog post in its self. The clinical trials reduced hospital admissions and serious infection rates, however, only the AstraZeneca vaccine checked participants for mild / asymptomatic infection. It is even harder to explicitly check for transmission. We could use hospital admissions, we could use deaths. However, both have a lag from infection, and reducing infection is likely to reduce the rate of hospital admission and death.\r\nAnalysis\r\nAll the analysis is within the R code described below, using the initial steps described above.\r\nI started planning this process in late December 2020, before the UK’s third lock-down was announced. Infection falling does not guarantee that the fall is the result of vaccination, it could be the effect of lock-down. We will therefore need to make some comparisons with previous lock-downs. The first UK lock-down was in late March 2020 however, testing capacity was significantly constrained at the time so the data on infection rates is unreliable. The second lock-down was not as intensive, or long as the first or third, however we should include that data for comparison.\r\nResults\r\nThe aim is to visualise the results, so we should produce a graph.\r\n\r\n\r\n#\r\n\r\n\r\n\r\n\r\nConclusions\r\nThe rate of infection in November Lockdown for over 80s fell slower than the rate of infection for the under 70-79s and under 70s. Both the 70-79s and under 70s age groups fell at very similar rates. The number of infections in the 70-79 age group and over 80s is roughly similar and therefore this is unlikely to simply be a numbers issue.\r\nIn the January Lockdown\r\n\r\n\r\n\r\n",
    "preview": "https://github.com/polc1410/VaccineEffectiveness/raw/master/Rplot.png",
    "last_modified": "2022-05-13T11:44:13+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-03-14-High-Dose-Dexamethasone/",
    "title": "High Dose Dexamethasone",
    "description": "Guest blog post at The Data Lab about the use of High Dose Dexamethasone.",
    "author": [
      {
        "name": "Brian MacKenna",
        "url": {}
      },
      {
        "name": "Calum Polwart",
        "url": {}
      }
    ],
    "date": "2019-11-28",
    "categories": [],
    "contents": "\r\nHere is a link to a blog post, I wrote for the guys over at TheDataLab about High Dose Dexamethasone. Data Lab tells me this was one of their most read posts. I continue to keep an eye on the dexamethasone data, and in the future will post a “live” update of that data on here.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2022-05-13T11:48:56+01:00",
    "input_file": {}
  }
]
